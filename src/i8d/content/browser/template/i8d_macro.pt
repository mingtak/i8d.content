<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="i8d.content">
<body>

  <metal:row define-macro="productList">

    <tal:para define="pageItems python:3;
              s python:getattr(request, 's', 0)">

    <!-- Banner -->
    <div class="category-description std container"
         tal:condition="python:hasattr(context, 'bannerImage')">
      <div class="category-image">
        <img tal:attributes="src string:${context/absolute_url}/@@images/bannerImage/banner;
                             alt portal/Title; title portal/Title">
      </div>
    </div>

    <div class="main container">
      <div class="row">
        <div class="col-main col-sm-9 col-sm-push-3">

          <!-- Title, 資料夾名稱或搜尋結果 -->
          <div class="category-title" tal:switch="template/getId">
            <h1 tal:case="string:search_result.pt"
                i18n:translate="">Search Result(s)</h1>
            <h1 tal:case="default"
                tal:content="context/Title">Tilte</h1>
          </div>

          <div class="category-products">
            <div class="toolbar">
              <div id="sort-by">
                <label class="left" i18n:translate="">Sort By: </label>
                <ul>
                  <li><span tal:replace="python:getattr(request, 'sortBy', 'ProductName')" i18n:translate=""/><span class="right-arrow"></span>
                    <ul>
                      <li><a tal:attributes="href string:${context/absolute_url}?sortBy=ProductName" i18n:translate="">ProductName</a></li>
                      <li><a tal:attributes="href string:${context/absolute_url}?sortBy=Price" i18n:translate="">Price</a></li>
                    </ul>
                  </li>
                </ul>
<!--                <a class="button-asc left" href="#" title="Set Descending Direction"><span class="glyphicon glyphicon-arrow-up"></span></a> -->
              </div>

              <div class="pager">
<!--
                <div id="limiter">
                  <label>View: </label>
                  <ul>
                    <li><a href="#">15<span class="right-arrow"></span></a>
                      <ul>
                        <li><a href="#">20</a></li>
                        <li><a href="#">30</a></li>
                        <li><a href="#">35</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
-->





                <div class="pages"
                     tal:condition="python:len(brain)>pageItems">
                  <label>頁數:</label>
                  <ul class="pagination">



<!-- 上一頁 -->
                    <li tal:condition="python:s > 0">
                      <a tal:attributes="href python:'%s?key=%s&s:int=%s&t=%s' %
                         (request.getURL(), request.form.get('key'), (0 if s-pageItems<0 else s-pageItems), request.get('t'))">&laquo;</a>
                    </li>




<!-- 往前頁數-->
                    <li tal:repeat="pagenumber python:range(s/pageItems)">
                      <a tal:content="python:pagenumber + 1"
                         tal:attributes="href python:'%s?key=%s&s:int=%s' %
                         (request.getURL(), request.form.get('key'), (pagenumber*pageItems))">1</a>
                    </li>


    <!-- Current page -->

                    <li class="active"
                        tal:condition="python:s>=0">
                      <a href="#" tal:content="python:s/pageItems + 1">3</a>
                    </li>


<!-- 往後頁數 -->
    <tal:check condition="python:(len(brain)/pageItems) > (s/pageItems +1)">
                    <li tal:repeat="pagenumber python:range((s/pageItems +2), 1+len(brain)/pageItems)">
                      <a tal:content="pagenumber"
                         tal:attributes="href python:'%s?key=%s&s:int=%s' %
                         (request.getURL(), request.form.get('key'), pagenumber*pageItems)"/>
                    </li>
    </tal:check>



    <!-- Link to last -->
                    <li tal:condition="python:s+pageItems<len(brain)">
                      <a tal:attributes="href python:'%s?key=%s&s:int=%s&t=%s' %
                         (request.getURL(), request.form.get('key'), s+pageItems, request.get('t'))">&raquo;</a>
                    </li>



                  </ul>
                </div>

              </div>
            </div>


            <ul class="products-grid">

    <tal:repeat repeat="item python:brain[s:s+pageItems]">
              <li class="item col-lg-4 col-md-3 col-sm-4 col-xs-12">
                              <div class="col-item">
                                <div class="product-image-area">
                                  <a class="product-image" tal:attributes="title item/Title;
                                                                           href item/getURL">
                                    <tal:img switch="item/hasImage1">
                                      <img tal:case="True" tal:attributes="src string:${item/getURL}/@@images/image_1/preview;
                                                           alt item/Title" class="img-responsive" style="max-height:200px; min-height:200px"/>
                                      <img tal:case="default" tal:attributes="src string:/resource/images/nopicture.png/@@images/image/preview;
                                                              alt item/Title" class="img-responsive" style="max-height:200px; min-height:200px"/>
                                    </tal:img>
                                  </a>
                                </div>

                <!-- 行動連結 -->
                <div class="actions-links"><span class="add-to-links">
                  <tal:img switch="python:bool(item.getObject().image_1)">
                    <a tal:case="True" title="Detail" class="magik-btn-quickview group1" i18n:attributes="title"
                         tal:attributes="href string:${item/getURL}/@@images/image_1/colorbox.png">
                      <span i18n:translate="">Detail</span>
                    </a>
                    <a tal:case="default" title="Detail" class="magik-btn-quickview group1" i18n:attributes="title"
                         tal:attributes="href string:/resource/images/nopicture.png/@@images/image/colorbox.png">
                      <span i18n:translate="">Detail</span>
                    </a>
                  </tal:img>
                  <a title="Add to Cart" class="link-wishlist cart_add" i18n:attributes="title"
                     tal:attributes="data-uid item/UID; data-update string:add" ><span i18n:translate="">Add to Cart</span></a>
                  <a title="Search Related" class="link-compare" i18n:attributes="title"
                     tal:define="key_string python:'key:list=%s' % item.getObject().brand"
                     tal:attributes="href string:/search_result?${key_string}"><span i18n:translate="">Search Related</span></a></span>
                </div>
                <!-- 行動連結end -->



                                <div class="info">
                                  <div class="info-inner">
                                    <div class="item-title">
                                      <a tal:attributes="href item/getURL; title item/Title" tal:content="item/Title"> Sample Product </a>
                                    </div>
                                    <!--item-title-->
                                    <div class="item-content">
                                      <div class="price-box">
                                        <p class="special-price"> <span class="price" tal:content="string:$ ${item/salePrice}"> $45.00 </span> </p>
                                        <p tal:condition="python:item.listPrice > item.salePrice" class="old-price">
                                          <span class="price-sep">-</span> <span class="price" tal:content="string:$ ${item/listPrice}"> $50.00 </span>
                                        </p>
                                      </div>
                                    </div>
                                    <!--item-content--> 
                                  </div>
                                  <!--info-inner-->
                                  <div class="actions">
                                    <button type="button" title="Add to Cart" class="button btn-cart cart_add" i18n:attributes="title"
                                      tal:attributes="data-uid item/UID; data-update string:add"><span i18n:translate="">Add to Cart</span></button>
                                  </div>
                                  <!--actions-->
                                  <div class="clearfix"> </div>
                                </div>
                              </div>
              </li>
    </tal:repeat>
            </ul>
          </div>
        </div>


        <aside class="col-left sidebar col-sm-3 col-xs-12 col-sm-pull-9"
               tal:switch="template/getId" >
            <tal:brand case="string:category_view.pt">
              <metal:macro use-macro="context/@@i8d_macro/macros/aside_category" />
              <metal:macro use-macro="context/@@i8d_macro/macros/aside_brand" />
            </tal:brand>
            <tal:brand case="default">
              <metal:macro use-macro="context/@@i8d_macro/macros/aside_brand" />
              <metal:macro use-macro="context/@@i8d_macro/macros/aside_category" />
            </tal:brand>
        </aside>
      </div>
    </div>
  <!-- End Two columns content -->

    </tal:para>
  </metal:row>



  <metal:row define-macro="aside_brand">
          <div class="side-nav-categories">
            <div class="block-title" i18n:translate=""> All Brands </div>
            <div class="box-content box-category">
              <ul id="magicat" tal:define="brands python:portal['Brand'].getChildNodes()">
                <li class="level0- level0" tal:repeat="item brands">
                  <span class="magicat-cat">
                    <a tal:attributes="href item/absolute_url; title item/title">
                      <img tal:attributes="src string:${item/absolute_url}/@@images/image/icon; alt item/title"/>
                      <span tal:content="item/title" style="margin-left:15px;">Brand</span>
                    </a>
                  </span>
                </li>
              </ul>
            </div>
          </div>
  </metal:row>
  <metal:row define-macro="aside_category">
          <div class="side-nav-categories">
            <div class="block-title" i18n:translate=""> All Category </div>
            <div class="box-content box-category">
              <ul id="magicat" tal:define="brands python:portal['category'].getChildNodes()">
                <li class="level0- level0" tal:repeat="item brands">
                  <span class="magicat-cat">
                    <a tal:attributes="href item/absolute_url; title item/title">
                      <img tal:attributes="src string:${item/absolute_url}/@@images/image/icon; alt item/title"/>
                      <span tal:content="item/title" style="margin-left:15px;">Brand</span>
                    </a>
                  </span>
                </li>
              </ul>
            </div>
          </div>
  </metal:row>






</body>
</html>
